$('.accordion-title.active').removeClass('active');
$('.accordion-content:visible').slideUp();
$('.accordion-title[data-step="<%= @order.state %>"]').addClass('active');
$('.accordion-title[data-step="address"] .check-edit').<%= @order.state.eql?('payment') ? 'remove' : 'add' %>Class('hide');
$('.accordion-content[data-step="<%= @order.state %>"]').
  html('<%=j render("/spree/checkout/#{@order.state}") %>').
  slideDown();

if (window.checkout_page && window.checkout_page.onAjaxSuccessHandler) {
  window.checkout_page.onAjaxSuccessHandler()
}

if (window.setCurrentPath) {
  window.setCurrentPath('/checkout/payment');
}
