<%= render :partial => 'spree/admin/shared/product_sub_menu' %>

<%= render :partial => 'spree/admin/shared/product_tabs', :locals => { :current => 'Product Properties' } %>

<%= render :partial => 'spree/shared/error_messages', :locals => { :target => @product } %>

<% content_for :page_actions do %>
  <ul class="tollbar inline-menu">
    <li>
      <%= link_to_add_fields t(:add_product_properties), 'tbody#product_properties', :class => 'icon-plus button' %>
    </li>
    <li>
      <span id="new_ptype_link">
        <%= link_to t(:select_from_prototype), available_admin_prototypes_url, :remote => true, 'data-update' => 'prototypes', :class => 'button icon-copy' %>
      </span>
    </li>
  </ul>
<% end %>

<%= form_for @product, :url => admin_product_url(@product), :method => :put do |f| %>
  <fieldset class="no-border-top">
    <div class="add_product_properties" data-hook="add_product_properties"></div>

    <div id="prototypes" data-hook></div>
    <%= image_tag 'spinner.gif', :plugin => 'spree', :style => 'display:none;', :id => 'busy_indicator' %>

    <table class="index sortable" data-hook data-sortable-link="<%= update_positions_admin_product_product_properties_url %>">
      <thead>
        <tr data-hook="product_properties_header">
          <th colspan="2"><%= t(:property) %></th>
          <th><%= t(:value) %></th>
          <th class="actions"></th>
        </tr>
      </thead>
      <tbody id="product_properties" data-hook>
        <%= f.fields_for :product_properties do |pp_form| %>
          <%= render :partial => 'product_property_fields', :locals => { :f => pp_form } %>
        <% end %>
      </tbody>
    </table>

    <%= render :partial => 'spree/admin/shared/edit_resource_links' %>

    <%= hidden_field_tag 'clear_product_properties', 'true' %>
  </fieldset>
<% end %>

<%= javascript_tag do -%>
  var properties = <%= raw(@properties.to_json) %>;

  $("#product_properties input.autocomplete").live("keydown", function(){
    already_auto_completed = $(this).is('ac_input');
    if (!already_auto_completed) {
      $(this).autocomplete({source: properties});
      $(this).focus();
    }
  });
<% end -%>

<hr>

<div class="row">
  <div class="twelve columns">
    <h2>Product Properties</h2>

    <div class="twelve columns">
      <p>Product properties allows configuring content and behavior of a product.</p>
      <ul>
        <li>
          Properties flagged with <b>[DEPRECATED]</b> in its value are not used anymore, but are still
          referenced on some places of the system
        </li>
        <li>
          Properties <b>NOT</b> listed here are <b>NOT</b> used anywhere, and can safely be removed
        </li>
      </ul>
    </div>

    <table>
      <thead>
        <tr>
          <th>Property</th>
          <th>Value</th>
        </tr>
      </thead>
      <tr>
        <td>bitly</td>
        <td><b>[DEPRECATED]</b> Used on old Girlfriend X Fame campaign LPs</td>
      </tr>
      <tr>
        <td>care_instructions</td>
        <td><b>[DEPRECATED]</b> Used for fabrics care instructions</td>
      </tr>
      <tr>
        <td>color_customization</td>
        <td>Allows product to have custom colors. Possible values: "yes", "no"</td>
      </tr>
      <tr>
        <td>customised_days_for_making</td>
        <td>Days for making a dress which has customizations. Will affect delivery dates. Possible values: integers. Default: 10</td>
      </tr>
      <tr>
        <td>designer_note</td>
        <td><b>[DEPRECATED]</b></td>
      </tr>
      <tr>
        <td>fabric</td>
        <td>Fabric details displayed at the Product Details Page</td>
      </tr>
      <tr>
        <td>fit</td>
        <td>Fit content displayed at the Product Details Page</td>
      </tr>
      <tr>
        <td>preorder</td>
        <td><b>[DEPRECATED]</b> Displays at the Product Details Page if a product is going to ship within 4 weeks. Possible values: "yes", "no"</td>
      </tr>
      <tr>
        <td>product_coding</td>
        <td><b>[DEPRECATED] (UNCERTAIN)</b> Numbers varying from "2.0" to "9.0"</td>
      </tr>
      <tr>
        <td>product_details</td>
        <td>Extra details displayed at the Product Details Page</td>
      </tr>
      <tr>
        <td>product_type</td>
        <td>Product type to be displayed at the Product Details Page as a subheading, right below the Product name</td>
      </tr>
      <tr>
        <td>revenue</td>
        <td><b>[DEPRECATED]</b> (UNCERTAIN) Numbers varying from "2.0" to "9.0"</td>
      </tr>
      <tr>
        <td>short_description</td>
        <td><b>[DEPRECATED]</b> Short description given to a product. Also was added to the meta title. Default: ""</td>
      </tr>
      <tr>
        <td>size</td>
        <td>Size information displayed at the Product Details Page</td>
      </tr>
      <tr>
        <td>special_description</td>
        <td><b>[DEPRECATED]</b> Description used on old LPs (Girlfriend X Fame and Plus size)</td>
      </tr>
      <tr>
        <td>standard_days_for_making</td>
        <td>Days for making a dress with <b>NO</b> customizations. Will affect delivery dates. Possible values: integers. Default: 10</td>
      </tr>
      <tr>
        <td>style_notes</td>
        <td>Style notes displayed at the Product Details Page</td>
      </tr>
    </table>
  </div>
</div>
