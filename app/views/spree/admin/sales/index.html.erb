<% content_for :page_title do %>
  Sales
<% end %>

<% content_for :page_actions do %>
  <div class="toolbar" data-hook="toolbar">
    <ul class="actions header-action-links inline-menu">
      <li id="new_sale_link">
        <%= button_link_to t(:new_sale), new_object_url, { :remote => true, :icon => 'icon-plus', :id => 'admin_new_sale' } %>
      </li>
    </ul>
  </div>
<% end %>

<div id="new_sale" data-hook="new-sale"></div>

<div class='message-notice'>Only latest sitewide sale will be applied.</div>
<% if @collection.any? %>
  <table class="index">
    <colgroup>
      <col style="width: 10%;">
      <col style="width: 20%;">
      <col style="width: 20%;">
      <col style="width: 10%;">
      <col style="width: 10%;">
      <col style="width: 20%;">
      <col style="width: 10%;">
    </colgroup>
    <thead>
    <tr>
      <th><%= t(:id) %></th>
      <th><%= t(:name) %></th>
      <th><%= t(:state) %></th>
      <th><%= t(:sitewide) %></th>
      <th><%= t(:discount) %></th>
      <th><%= t(:sitewide_message) %></th>
      <th><%= t(:currency) %></th>
      <th class="actions"></th>
    </tr>
    </thead>
    <tbody>
    <% @collection.each do |sale| %>
      <tr>
        <td class="align-center"><%= sale.id %></td>
        <td class="align-center"><%= sale.name %></td>
        <td class="align-center"><%= sale.active? ? t(:active) : t(:inactive) %></td>
        <td class="align-center"><%= sale.sitewide? ? 'Yes' : '-' %></td>
        <td class="align-center"><%= sale.discount_string %></td>
        <td class="align-center"><%= sale.sitewide_message %></td>
        <td class="align-center"><%= sale.currency.presence || 'ALL' %></td>
        <td class="actions">
          <%= link_to_edit sale, :no_text => true, :class => 'edit'%>
          &nbsp;
          <%= link_to_delete sale, :no_text => true %>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>
<% else %>
  <div class="no-objects-found">
    <%= t(:no_results) %>
  </div>
<% end %>
