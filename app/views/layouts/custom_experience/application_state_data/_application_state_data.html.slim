/ TODO:
  "webby": move data fetch to the details_controller
  "nodey": rewrite transformProductJSON to handle cart too

ruby:
  cart = UserCart::UserCartResource.new(order: current_order).read
  auSite = current_site_version&.name != 'USA'
  cartData = raw cart.serialize.to_json

javascript:
  window.fixBody = function(shouldFix){
    var body = document.querySelector('body');
    if (shouldFix){
      body.style.overflow = 'hidden';
    } else {
      body.style.overflow = 'inherit';
    }
  };

  window.ApplicationStateData = {
    auSite: #{ raw auSite },
    currentSiteVersion: "#{current_site_version&.name}",
    CartData: #{ raw cartData },
    UserData: #{ raw spree_current_user.to_json }
  };
