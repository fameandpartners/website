ruby:
  product_link = -> (product) { collection_product_path(product, color: product.color.try(:name)) }

= link_to product_link.call(product), :class => 'media-wrap' do
  = image_tag product.images.first, :alt => product.name, :class => "img-product", 'data-hover' => product.images.last, 'data-original' => product.images.first
.details.text-center
  = link_to product_link.call(product), :class => 'media-wrap product-name' do
    span.name
      = product.name
      - if product.name.downcase.include?('skirt')
        span.skirt-alert
          |  (skirt only)
  span.price = product_price_with_discount(product.price, product.discount)

  - if Features.active?(:moodboard)
    .dropdown
      a.js-trigger-add-to-moodboard href='javascript:;' data-toggle='dropdown'
        sup +
        | moodboard
        span.arrow-down
          i.fa.fa-caret-down
      .dropdown-menu
        - user_moodboards.moodboards.each do |m|
          a href='javascript:;' data-moodboard-id="#{m.id}" data-product-id="#{product.id}" data-color-id="#{product.color.id}" onclick="clickAddMoodboard(this, event);"
            - if m.items.any?{|i| i.product_id == product.id && i.active?}
              i.fa.fa-check
            - else
              i.fa.fa-plus
            = m.name

  /.message-box 24 hours only
- if product.fast_making
 = image_tag src='express_making.png', class: 'express-delivery', alt: "Express Making"
- if product.fast_delivery
 = image_tag src='express_delivery.png', class: 'express-delivery', alt: "Express Delivery"
