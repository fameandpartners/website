class AddStylesIntoDressTaxon < ActiveRecord::Migration
  def up
    taxon = Spree::Taxon.find_by_permalink('style/dress')
    skus = [
      'fp2261p', 'fp2320', 'fp2042', 'fp2185', 'usp1026', '4B466', 'fp2051', 'fp2196', 'fp2307',
      '4b409l', 'c161043b', 'usp1012', 'usp1014', '4B196', 'fp2266', 'fp2059', '4B587', 'fpmc118',
      '4B164', 'fp2359', 'fp2127', 'c161019', 'c161027', '4B555', 'fpmc214', '4B590', 'usp1220p',
      'fp2238', '4B064', 'usp1234', '4B300', 'c161051', 'fp2249', 'fp2173', '4b450l', 'fp2178',
      '4b398l', 'fp2166b', '4b487c', 'fp2064', 'c161045', 'fp2003', 'fp2298p', 'fp2283', 'c161030',
      'USP1065P', 'usp1001', 'fp2280', '4B573', '4B054', 'fp2290', 'c161054', '4B568', 'fp2199b',
      'c161038', 'fp2272', 'fp2029', 'fp2192p', 'fp2193', '4B588', 'usp1205', '4B159', 'fp2136',
      '4b130l', 'usp1082', 'fp2138p', 'usp1074p', 'fp2153', '4B501', 'usp1025', '4B366', 'fp2206',
      'usp1223p', '4b564b', 'fp2262', 'fp2052', '4B305', 'usp1017l', 'usp1008', 'fp2011', '1310029W',
      'fp2305', 'fp2184', 'fp2298', 'usp1016l', 'usp1007', 'fp2252', 'fp2248', 'usp1022c', 'fp2156',
      '4B297', 'c161008', '4b130w', 'usp1096', 'fp2014', 'fp2254b', 'fp2032', 'fp2302', '4B506B',
      'usp1217', '4B464', 'c161021', 'fp2276', 'fp2191', 'fp2157', 'fp2144', '4B279', 'fp2202',
      'fp2060', 'c161041', 'fp2211', 'fp2199', 'fp2143', 'fpmc107', 'fp2136p', 'fp2045', 'usp1232',
      '4B387', 'usp1008d', 'fp2258', 'fp2256', 'usp1007l', 'usp1024', 'fp2056', 'fp2255', '4B591',
      'fp2155', 'fp2224', 'fp2197', 'fp2236', '4B161', '4B633', 'fp2275', 'fp2050', 'fp2048',
      '4B320', 'c161037', '4B277', 'fp2011p', '4B141', 'fp2286', 'fp2098', 'c161036', 'fp2034p',
      'fp2063', 'fp2203', 'usp1017', 'fp2109', 'fp2268', 'usp1064', 'fp2021', 'usp1073', '4b636',
      'usp1002l', '4B268', '4B123', '4B487B', 'fp2148', 'fp2227', 'usp1091', '4B396', 'fp2251',
      'fp2006', '4B332', 'fp2250', 'fp2174', 'c161042p2', 'fp2159', 'fp2176b', 'fp2294', '4B257',
      'fp2231', 'c161029', 'fp2273', 'fp2049', 'fp2259', 'fp2293', 'usp1004', 'fp2183', 'fp2282',
      'c161044b', 'fpmc266', 'fp2201', 'fp2150p', 'fp2242', 'usp1033', 'usp1060', 'fp2299',
      'c161047p', 'fp2237', '4b297w', 'c161046', 'fp2308', '4B276', 'fp2118', 'usp1079p', 'c161001',
      'fp2288', 'fp2223', 'usp1040', 'fp2230', 'fp2278', '4B540', 'fp2253', 'usp1023', 'fp2033',
      'fp2037', 'usp1003', 'fp2260', '4b164l', 'fp2301', 'fp2183b', 'c161002', 'fp2228', 'usp1095',
      '4B301', 'c161026', '4b592l', 'fp2269', 'fp2142', 'usp1022b', 'fp2057', 'fp2044', 'usp1022',
      'fp2187', 'fp2006p', 'usp1029', 'fpmc116', 'fpmc124', 'usp1006', '4B480', 'fp2243', 'fp2255p',
      'fp2198', 'fp2273m', 'usp1050', 'fp2246', 'c161003b', 'fp2241', 'fp2323', 'fp2027p', 'fp2281',
      'fp2297', 'usp1078', 'c161017', '4B107', 'usp1036', 'fp2296b', 'fp2191b', 'fp2204', 'usp1072',
      'usp1068', '4B130', 'fp2154', 'usp1085', 'fp2061', 'fpmc230', 'fp2226', '4B567', 'fp2062',
      'fp2029b', 'fp2015p', 'fp2141', '4b464l', 'fp2039', 'usp1047', 'usp1220', '4b464b', '4B016DL',
      '4B589', 'fp2300', 'fp2122', 'fpmc117', 'fp2284', '4B398', 'fp2192b', '4b643', 'usp1018',
      'fp2113', '4B462', '4B113', 'c161004', 'fp2046', 'fp2207', 'fp2210', 'fp2263', 'c161028',
      'c161024', 'fprv1027', 'fp2186', 'fpmc126', 'fp2195', 'c161006', 'usp1065p', 'fp2289',
      '4B408', '4B157', 'usp1016', 'fp2146', '4B316', 'fp2221', 'c161012', 'fp2020', 'fp2112',
      'fp2265', 'usp1097', 'USP1029', 'fp2209', 'fpmc120', '4B511', '4B281', 'fp2002l', 'fp2239',
      '4B612', 'fp2115', 'fp2097', 'c161003', '4B280', '4B094', 'usp1015', 'fp2240', 'c161021p',
      'usp1083', 'fp2295', 'fp2188', 'fp2192', 'usp1007p', 'fp2304', '1310023CL', 'fp2137',
      'fp2176', 'fp2055', '4B297B', 'c161025', 'fp2205', 'fpmc108', 'fp2261', 'c161037p',
      'fp2222', 'fp2169', '4B450', 'fp2254', 'fp2198m', 'fp2208', 'fp2170', 'usp1013', 'c161043',
      'fp2029p', 'fp2229', 'fp2047', 'fp2150', 'fp2166', 'fp2245', 'usp1027l', 'usp1045',
      'fp2244', '4B386', 'fp2274',
    ]

    product_ids = Spree::Variant
      .joins('INNER JOIN global_skus ON spree_variants.id = global_skus.variant_id')
      .where('global_skus.style_number ILIKE ANY ( array[?] )', skus)
      .pluck('DISTINCT(spree_variants.product_id)')

    taxon.product_ids = product_ids
    taxon.save
  end

  def down
    taxon = Spree::Taxon.find_by_permalink('style/dress')
    taxon.product_ids = []
    taxon.save
  end

end
