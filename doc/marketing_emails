config/schedule.rb
  => runner 'EmailMarketing.send_emails'

lib/email_marketing
  => add workers from app/workers to redis queue
  => sidekiq works with them

how to run sidekiq
  - bundle exec sidekiq

  
# Sidekig help notes
# See workers
Sidekiq::Client.registered_workers

# See queues
Sidekiq::Client.registered_queues

# See all jobs for one queue
Sidekiq.redis { |r| r.lrange "queue:default", 0, -1 }

# See all jobs in all queues
Sidekiq::Client.registered_queues.each do |q|
Sidekiq.redis { |r| r.lrange "queue:#{q}", 0, -1 }
end

# Remove a queue and all of its jobs
Sidekiq.redis do |r| 
r.srem "queues", "default"
r.del  "queue:default"
end
